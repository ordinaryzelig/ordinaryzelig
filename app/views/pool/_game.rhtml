<% 
=begin
recursively render games.
render children games and then the pic.
=end -%>

<% pic = pool_user.pics.for_game game -%>

<% div_for game do -%>
  <div class=children>
    
    <% # recurse and render children. -%>
    <% game.children.each do |child| %>
      <div>
        <%= render :partial => "game", :locals => {:pool_user => pool_user,
                                                   :game => child,
                                                   :rounds_left => rounds_left - 1} if rounds_left > 0 %>
      </div>
    <% end -%>
    
    <% # if no children, show first round bids. %>
    <% if game.children.empty? -%>
      <% game.first_round_bids.each do |bid| -%>
        <div class=firstRoundBid id="bid_<%= bid.id %>">
          <%= content_tag :div, render(:partial => "bid", :locals => {:bid => bid,
                                                    :game => game,
                                                    :is_first_round_bid => true,
                                                    :pic => pic,
                                                    :pool_user => pool_user}), :class => 'bid' %>
        </div>
      <% end -%>
    <% end %>
    
  </div> <% # end children. -%>
  
  <% # pic. -%>
  <% div_for pic do -%>
    <%= render(:partial => "pic", :locals => {:pic => pic, :pool_user => pool_user}) %>
  <% end -%>
  
<% end -%>
